<!DOCTYPE html>
<html>
	<head>
<!--
		<meta charset="UTF-8" />
 -->
		<title>Hello Thymeleaf</title>
		<div th:replace="common/common::header"></div>
	</head>
	<body>
		<div th:replace="common/common::menu"></div>
		<div class="container">
			<div class="container">
				<h3>ユーザー情報更新</h3>
			</div>
			<hr style="border:0;border-top:4px solid orange;">
			<div class="well">
				<form class="form-horizontal" th:action="@{/userManage/handle}" th:object="${userManageForm}" method="post">
					<div class="form-group">
						<label for="userId" class="col-sm-2 control-label">ユーザーID</label>
						<div class="col-sm-2">
							<input type="text" class="form-control" id="userId" placeholder="ユーザーID" th:field="*{userId}"></input>
							<span th:if="${#fields.hasErrors('userId')}" class="text-danger" th:errors="*{userId}">Error</span>
						</div>
					</div>
					<div class="form-group">
						<label for="roleId" class="col-sm-2 control-label">role ID</label>
						<div class="col-sm-2">
							<input type="text" class="form-control" id="roleId" placeholder="role id" th:field="*{roleId}"></input>
							<span th:if="${#fields.hasErrors('roleId')}" class="text-danger" th:errors="*{roleId}">Error</span>
						</div>
					</div>
					<div class="form-group">
						<label for="affiliation" class="col-sm-2 control-label">所属</label>
						<div class="col-sm-2">
							<input type="text" class="form-control" id="affiliation" placeholder="所属" th:field="*{affiliation}"></input>
							<span th:if="${#fields.hasErrors('affiliation')}" class="text-danger" th:errors="*{affiliation}">Error</span>
						</div>
					</div>
					<div class="form-group">
						<label for="position" class="col-sm-2 control-label">役職</label>
						<div class="col-sm-2">
							<input type="text" class="form-control" id="position" placeholder="役職" th:field="*{position}"></input>
							<span th:if="${#fields.hasErrors('position')}" class="text-danger" th:errors="*{position}">Error</span>
						</div>
					</div>
					<div class="form-group">
						<label for="project" class="col-sm-2 control-label">プロジェクト</label>
						<div class="col-sm-4">
						<select class="form-control" id="projectId" th:name="projectId">
							<option th:each="project : ${projects}"
									th:value="${project.projectId}"
									th:text="${project.projectName}"
									th:selected="${project.projectId} == ${currentProject}"></option>
						</select>
						</div>
						<span th:if="${#fields.hasErrors('projectId')}" class="text-danger" th:errors="*{projectId}">Error</span>
					</div>
					<div class="form-group">
						<label for="fromDate" class="col-sm-2 control-label">期間</label>
						<div class="col-sm-2">
							<input type="text" class="form-control datepicker" id="fromDate" placeholder="yyyy-MM-dd" th:field="*{fromDate}"></input>
							<span th:if="${#fields.hasErrors('fromDate')}" class="text-danger" th:errors="*{fromDate}">Error</span>
						</div>
						～
						<div class="col-sm-2">
							<input type="text" class="form-control datepicker" id="toDate" placeholder="yyyy-MM-dd" th:field="*{toDate}"></input>
							<span th:if="${#fields.hasErrors('toDate')}" class="text-danger" th:errors="*{toDate}">Error</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">パスワード初期化</label>
						<div class="checkbox col-sm-2">
							<label>
								<input type="checkbox" name="fcheck" value="on" th:field="*{isPasswordInitialize}" />
							</label>
							<span th:if="${#fields.hasErrors('isPasswordInitialize')}" th:errors="*{isPasswordInitialize}" class="help-block">Error!</span>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label">削除済み</label>
						<div class="checkbox col-sm-2">
							<label>
								<input type="checkbox" name="isDeleted" value="on" th:field="*{isDeleted}" />
							</label>
							<span th:if="${#fields.hasErrors('isDeleted')}" th:errors="*{isDeleted}" class="help-block">Error!</span>
						</div>
					</div>
					<input type="hidden" th:name="uVersion" th:value="*{uVersion}"></input>
					<input type="hidden" th:name="jVersion" th:value="*{jVersion}"></input>
					<input type="hidden" th:name="token" th:value="${token}"></input>
					<div class="form-group">
						<button type="submit" class="btn btn-lg btn-warning  col-sm-offset-10">更新</button>
					</div>
					
				</form>
			</div>
		</div>

		<div class="container">
			<div class="container">
				<h3>参画プロジェクト一覧</h3>
			</div>
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th>プロジェクト</th>
						<th>開始日</th>
						<th>終了日</th>
					</tr>
				</thead>
				<tbody th:remove="all-but-first">
					<tr th:each="project : ${userProjects}">
						<td class="col-sm-1" th:text="${project.projectId}">プロジェクト１</td>
						<td class="col-sm-1" th:text="${project.startDate}">2017-01-01</td>
						<td class="col-sm-1" th:text="${project.endDate}">2017-12-31</td>
					</tr>
				</tbody>
			</table>
		</div>
	</body>
</html>
